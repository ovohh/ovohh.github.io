import{am as I,ap as p,an as y,aq as E,ao as S}from"./axios-C_uVDudZ.js";import{E as V,a as C}from"./el-form-item-CeV2jItU.js";import{E as _}from"./index-Cp1Or9sS.js";import{j as b,r as f,a5 as B,l as F,m as N,n as t,v as i,B as a,Y as r,aa as R,ab as U,ac as L}from"./index-9c-LS0zl.js";const T=n=>(R("data-v-fa67e369"),n=n(),U(),n),$=T(()=>i("div",{class:"card-header"},[i("span",null,"登录")],-1)),j={class:"box"},q=b({__name:"SignIn",setup(n){const s=f(""),l=f(""),g=()=>{if(s.value===""||l.value===""){alert("账号密码不能为空");return}p.post("http://192.168.31.102:8000/signin",{username:s.value,password:l.value},{headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(e){if(e.status===200)if(e.data.code===200){const o=e.data.token.access_token;localStorage.setItem("token",o),y.success("登录成功")}else alert(e.data.msg);else e.status===401?alert("登录失效"):(console.log(e),alert("登录失败"))}).catch(function(e){alert(e),console.log(e)})},h=()=>{s.value="",l.value=""},v=()=>{p.post("http://192.168.31.102:8000/test_user_signin",{},{headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then(function(e){e.status===200&&(_({title:"测试失败！",message:`错误信息：${e.data.msg}`,type:"error"}),console.log(e.data))}).catch(function(e){_({title:"测试失败！",message:`错误信息：${e.message}
请求失败或服务器无响应`,type:"error"}),console.log(e)})};return(e,o)=>{const m=E,u=V,c=S,k=B("RouterLink"),w=C,x=I;return F(),N(x,{style:{"max-width":"480px"}},{header:t(()=>[$]),default:t(()=>[i("div",j,[a(w,{ref:"ruleFormRef","label-width":"auto",style:{"max-width":"600px"},"status-icon":""},{default:t(()=>[a(u,{label:"用户名：",prop:"username"},{default:t(()=>[a(m,{modelValue:s.value,"onUpdate:modelValue":o[0]||(o[0]=d=>s.value=d)},null,8,["modelValue"])]),_:1}),a(u,{label:"登录密码：",prop:"password"},{default:t(()=>[a(m,{modelValue:l.value,"onUpdate:modelValue":o[1]||(o[1]=d=>l.value=d),type:"password"},null,8,["modelValue"])]),_:1}),a(u,null,{default:t(()=>[a(c,{type:"primary",onClick:g},{default:t(()=>[r("登录")]),_:1}),a(c,{onClick:h},{default:t(()=>[r("清空")]),_:1}),a(c,{onClick:v},{default:t(()=>[r("测试")]),_:1}),a(k,{to:"/"},{default:t(()=>[a(c,{type:"primary"},{default:t(()=>[r("返回首页")]),_:1})]),_:1})]),_:1})]),_:1},512)])]),_:1})}}}),D=L(q,[["__scopeId","data-v-fa67e369"]]);export{D as default};
