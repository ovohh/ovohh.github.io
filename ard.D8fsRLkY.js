import{ao as k,as as B,ar as $,ap as F,aq as U,at as h}from"./ard.B32tsdnC.js";import{E,a as S}from"./ard.CF9i62zO.js";import{_ as z,d as m}from"./ard.DKPDxeMv.js";import{d as C,r as I,z as f,h as Q,j as a,a5 as T,f as A,l as p,x as r,V as _,u as R,ab as Z,ac as N,ad as P}from"./ard.DAoQzSGD.js";import"./ard.Cqh_w9uZ.js";const L=u=>(Z("data-v-138b8653"),u=u(),N(),u),M={class:"card-header"},j=L(()=>p("span",null,"注册",-1)),D={class:"box"},G={class:"signUpButtonbox"},H=C({__name:"SignUp",setup(u){const c=k(),b=(o,e,l)=>{e===""?l(new Error("Please input the password again")):e!==t.password?l(new Error("两次输入密码不同")):l()},g=I(),t=f({username:"",password:"",password_confirm:"",qq_bind:"",key:""}),w=async o=>{o&&await o.validate(async(e,l)=>{e?B.post(c.api+"/signup",{username:t.username,password:t.password,qq_bind:t.qq_bind,key_code:t.key}).then(function(n){n.status===200?n.data.code===200?m.alert(`您的用户名为${t.username},密码为${t.password},请截图保存。`,"注册成功！",{confirmButtonText:"好的"}):m.alert(`失败原因：${n.data.msg}`,"注册失败！",{confirmButtonText:"好的"}):m.alert("请求失败02","注册失败！",{confirmButtonText:"好的"})}).catch(function(n){m.alert(n,"请求失败01",{confirmButtonText:"好的"})}):console.log("error submit!",l)})},x=z.debounce((...o)=>w(...o),5e3,{leading:!0,trailing:!1}),q=o=>{o&&(o.resetFields(),F.success("重置成功"))},V=f({username:[{required:!0,message:"请输入用户名",trigger:"blur"},{min:5,max:10,message:"仅支持5-10个字符",trigger:"blur"},{pattern:/^[a-zA-Z0-9]+$/,message:"只能输入数字和字母",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:5,max:16,message:"长度为5-16",trigger:"blur"},{pattern:/^[a-zA-Z0-9]+$/,message:"只能输入数字和字母",trigger:"blur"}],password_confirm:[{required:!0,message:"请确认密码",trigger:"blur"},{min:5,max:16,message:"长度为5-16",trigger:"blur"},{pattern:/^[a-zA-Z0-9]+$/,message:"只能输入数字和字母",trigger:"blur"},{validator:b,trigger:"blur"}],qq_bind:[{required:!0,message:"绑定QQ用于展示头像、找回密码",trigger:"blur"},{min:5,max:10,message:"QQ号码格式有误",trigger:"blur"},{pattern:/^[0-9]+$/,message:"只能输入数字",trigger:"blur"}],key:[{required:!0,message:"请输入激活码",trigger:"blur"},{min:24,max:24,message:"激活码格式有误",trigger:"blur"},{pattern:/^[a-zA-Z0-9]+$/,message:"只能输入数字和字母",trigger:"blur"}]});return(o,e)=>{const l=U,n=T("RouterLink"),i=h,d=E,y=S,v=$;return A(),Q(v,{style:{"max-width":"480px"}},{header:a(()=>[p("div",M,[j,r(n,{to:"/"},{default:a(()=>[r(l,{type:"danger",size:"small"},{default:a(()=>[_("关闭")]),_:1})]),_:1})])]),default:a(()=>[p("div",D,[r(y,{model:t,rules:V,"label-position":"right",ref_key:"ruleFormRef",ref:g,"label-width":"auto",style:{"max-width":"600px"},"status-icon":""},{default:a(()=>[r(d,{label:"用户名：",prop:"username","label-position":"left"},{default:a(()=>[r(i,{modelValue:t.username,"onUpdate:modelValue":e[0]||(e[0]=s=>t.username=s),placeholder:"5-10位字母或数字"},null,8,["modelValue"])]),_:1}),r(d,{label:"登录密码：",prop:"password","label-position":"left"},{default:a(()=>[r(i,{modelValue:t.password,"onUpdate:modelValue":e[1]||(e[1]=s=>t.password=s),type:"password",placeholder:"5-16位字符"},null,8,["modelValue"])]),_:1}),r(d,{label:"确认密码：",prop:"password_confirm","label-position":"left"},{default:a(()=>[r(i,{modelValue:t.password_confirm,"onUpdate:modelValue":e[2]||(e[2]=s=>t.password_confirm=s),type:"password",placeholder:"5-16位字符"},null,8,["modelValue"])]),_:1}),r(d,{label:"绑定QQ：",prop:"qq_bind","label-position":"left"},{default:a(()=>[r(i,{modelValue:t.qq_bind,"onUpdate:modelValue":e[3]||(e[3]=s=>t.qq_bind=s),placeholder:"用于展示头像、找回密码"},null,8,["modelValue"])]),_:1}),r(d,{label:"卡密：",prop:"key","label-position":"left"},{default:a(()=>[r(i,{modelValue:t.key,"onUpdate:modelValue":e[4]||(e[4]=s=>t.key=s)},null,8,["modelValue"])]),_:1}),p("div",G,[r(l,{type:"primary",onClick:e[5]||(e[5]=s=>R(x)(g.value))},{default:a(()=>[_("注册")]),_:1}),r(l,{onClick:e[6]||(e[6]=s=>q(g.value))},{default:a(()=>[_("清空")]),_:1})])]),_:1},8,["model","rules"])])]),_:1})}}}),Y=P(H,[["__scopeId","data-v-138b8653"]]);export{Y as default};
