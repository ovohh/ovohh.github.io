import{R as se,x as ue,U as O,q as Y,l as T,a9 as M,ai as Ce,a5 as J,ab as re,aq as K,K as ee,a6 as ie,ar as P,s as Z,_ as Q,p as xe,k as Se,as as ye,A as Ve,Q as de,ak as Ie,an as Le,al as N,ao as ae,am as we,ap as Be}from"./pqe_CZ_Ydynm.js";import{E as Ee,a as Fe}from"./pqe_jRTwNGAK.js";import{i as $e,u as Ne}from"./pqe_Da0Ka8d7.js";import{E as le}from"./pqe_CbPqbKvo.js";import{S as te,e as U,c as h,w as W,y as ce,g as me,r as z,L as D,G as ze,a1 as oe,d as L,Z as be,f as y,h as H,j as _,l as B,n as S,u as s,k as G,q as V,ae as R,R as q,af as A,C as X,F as De,V as w,Q as ve,E as j,D as fe,m as Ue,p as Ge,a2 as Re,z as ne,o as qe,a5 as Ae,x,ab as Oe,ac as Pe,ad as Te}from"./pqe_SsB-4NBv.js";import"./pqe_CV0IqR1e.js";const pe={modelValue:{type:[Number,String,Boolean],default:void 0},label:{type:[String,Boolean,Number,Object],default:void 0},value:{type:[String,Boolean,Number,Object],default:void 0},indeterminate:Boolean,disabled:Boolean,checked:Boolean,name:{type:String,default:void 0},trueValue:{type:[String,Number],default:void 0},falseValue:{type:[String,Number],default:void 0},trueLabel:{type:[String,Number],default:void 0},falseLabel:{type:[String,Number],default:void 0},id:{type:String,default:void 0},border:Boolean,size:se,tabindex:[String,Number],validateEvent:{type:Boolean,default:!0},...ue(["ariaControls"])},he={[O]:a=>te(a)||Y(a)||T(a),change:a=>te(a)||Y(a)||T(a)},E=Symbol("checkboxGroupContextKey"),Me=({model:a,isChecked:m})=>{const d=U(E,void 0),t=h(()=>{var i,v;const o=(i=d==null?void 0:d.max)==null?void 0:i.value,f=(v=d==null?void 0:d.min)==null?void 0:v.value;return!M(o)&&a.value.length>=o&&!m.value||!M(f)&&a.value.length<=f&&m.value});return{isDisabled:Ce(h(()=>(d==null?void 0:d.disabled.value)||t.value)),isLimitDisabled:t}},Ke=(a,{model:m,isLimitExceeded:d,hasOwnLabel:t,isDisabled:u,isLabeledByFormItem:i})=>{const v=U(E,void 0),{formItem:o}=J(),{emit:f}=me();function n(e){var g,k,r,b;return[!0,a.trueValue,a.trueLabel].includes(e)?(k=(g=a.trueValue)!=null?g:a.trueLabel)!=null?k:!0:(b=(r=a.falseValue)!=null?r:a.falseLabel)!=null?b:!1}function l(e,g){f("change",n(e),g)}function c(e){if(d.value)return;const g=e.target;f("change",n(g.checked),e)}async function p(e){d.value||!t.value&&!u.value&&i.value&&(e.composedPath().some(r=>r.tagName==="LABEL")||(m.value=n([!1,a.falseValue,a.falseLabel].includes(m.value)),await ce(),l(m.value,e)))}const C=h(()=>(v==null?void 0:v.validateEvent)||a.validateEvent);return W(()=>a.modelValue,()=>{C.value&&(o==null||o.validate("change").catch(e=>re()))}),{handleChange:c,onClickRoot:p}},je=a=>{const m=z(!1),{emit:d}=me(),t=U(E,void 0),u=h(()=>M(t)===!1),i=z(!1),v=h({get(){var o,f;return u.value?(o=t==null?void 0:t.modelValue)==null?void 0:o.value:(f=a.modelValue)!=null?f:m.value},set(o){var f,n;u.value&&D(o)?(i.value=((f=t==null?void 0:t.max)==null?void 0:f.value)!==void 0&&o.length>(t==null?void 0:t.max.value)&&o.length>v.value.length,i.value===!1&&((n=t==null?void 0:t.changeEvent)==null||n.call(t,o))):(d(O,o),m.value=o)}});return{model:v,isGroup:u,isLimitExceeded:i}},Je=(a,m,{model:d})=>{const t=U(E,void 0),u=z(!1),i=h(()=>K(a.value)?a.label:a.value),v=h(()=>{const l=d.value;return T(l)?l:D(l)?ze(i.value)?l.map(oe).some(c=>$e(c,i.value)):l.map(oe).includes(i.value):l!=null?l===a.trueValue||l===a.trueLabel:!!l}),o=ee(h(()=>{var l;return(l=t==null?void 0:t.size)==null?void 0:l.value}),{prop:!0}),f=ee(h(()=>{var l;return(l=t==null?void 0:t.size)==null?void 0:l.value})),n=h(()=>!!m.default||!K(i.value));return{checkboxButtonSize:o,isChecked:v,isFocused:u,checkboxSize:f,hasOwnLabel:n,actualValue:i}},ge=(a,m)=>{const{formItem:d}=J(),{model:t,isGroup:u,isLimitExceeded:i}=je(a),{isFocused:v,isChecked:o,checkboxButtonSize:f,checkboxSize:n,hasOwnLabel:l,actualValue:c}=Je(a,m,{model:t}),{isDisabled:p}=Me({model:t,isChecked:o}),{inputId:C,isLabeledByFormItem:e}=ie(a,{formItemContext:d,disableIdGeneration:l,disableIdManagement:u}),{handleChange:g,onClickRoot:k}=Ke(a,{model:t,isLimitExceeded:i,hasOwnLabel:l,isDisabled:p,isLabeledByFormItem:e});return(()=>{function b(){var F,$;D(t.value)&&!t.value.includes(c.value)?t.value.push(c.value):t.value=($=(F=a.trueValue)!=null?F:a.trueLabel)!=null?$:!0}a.checked&&b()})(),P({from:"label act as value",replacement:"value",version:"3.0.0",scope:"el-checkbox",ref:"https://element-plus.org/en-US/component/checkbox.html"},h(()=>u.value&&K(a.value))),P({from:"true-label",replacement:"true-value",version:"3.0.0",scope:"el-checkbox",ref:"https://element-plus.org/en-US/component/checkbox.html"},h(()=>!!a.trueLabel)),P({from:"false-label",replacement:"false-value",version:"3.0.0",scope:"el-checkbox",ref:"https://element-plus.org/en-US/component/checkbox.html"},h(()=>!!a.falseLabel)),{inputId:C,isLabeledByFormItem:e,isChecked:o,isDisabled:p,isFocused:v,checkboxButtonSize:f,checkboxSize:n,hasOwnLabel:l,model:t,actualValue:c,handleChange:g,onClickRoot:k}},Ze=L({name:"ElCheckbox"}),Qe=L({...Ze,props:pe,emits:he,setup(a){const m=a,d=be(),{inputId:t,isLabeledByFormItem:u,isChecked:i,isDisabled:v,isFocused:o,checkboxSize:f,hasOwnLabel:n,model:l,actualValue:c,handleChange:p,onClickRoot:C}=ge(m,d),e=Z("checkbox"),g=h(()=>[e.b(),e.m(f.value),e.is("disabled",v.value),e.is("bordered",m.border),e.is("checked",i.value)]),k=h(()=>[e.e("input"),e.is("disabled",v.value),e.is("checked",i.value),e.is("indeterminate",m.indeterminate),e.is("focus",o.value)]);return(r,b)=>(y(),H(fe(!s(n)&&s(u)?"span":"label"),{class:S(s(g)),"aria-controls":r.indeterminate?r.ariaControls:null,onClick:s(C)},{default:_(()=>{var F,$;return[B("span",{class:S(s(k))},[r.trueValue||r.falseValue||r.trueLabel||r.falseLabel?G((y(),V("input",{key:0,id:s(t),"onUpdate:modelValue":I=>R(l)?l.value=I:null,class:S(s(e).e("original")),type:"checkbox",indeterminate:r.indeterminate,name:r.name,tabindex:r.tabindex,disabled:s(v),"true-value":(F=r.trueValue)!=null?F:r.trueLabel,"false-value":($=r.falseValue)!=null?$:r.falseLabel,onChange:s(p),onFocus:I=>o.value=!0,onBlur:I=>o.value=!1,onClick:q(()=>{},["stop"])},null,42,["id","onUpdate:modelValue","indeterminate","name","tabindex","disabled","true-value","false-value","onChange","onFocus","onBlur","onClick"])),[[A,s(l)]]):G((y(),V("input",{key:1,id:s(t),"onUpdate:modelValue":I=>R(l)?l.value=I:null,class:S(s(e).e("original")),type:"checkbox",indeterminate:r.indeterminate,disabled:s(v),value:s(c),name:r.name,tabindex:r.tabindex,onChange:s(p),onFocus:I=>o.value=!0,onBlur:I=>o.value=!1,onClick:q(()=>{},["stop"])},null,42,["id","onUpdate:modelValue","indeterminate","disabled","value","name","tabindex","onChange","onFocus","onBlur","onClick"])),[[A,s(l)]]),B("span",{class:S(s(e).e("inner"))},null,2)],2),s(n)?(y(),V("span",{key:0,class:S(s(e).e("label"))},[X(r.$slots,"default"),r.$slots.default?j("v-if",!0):(y(),V(De,{key:0},[w(ve(r.label),1)],64))],2)):j("v-if",!0)]}),_:3},8,["class","aria-controls","onClick"]))}});var We=Q(Qe,[["__file","checkbox.vue"]]);const He=L({name:"ElCheckboxButton"}),Xe=L({...He,props:pe,emits:he,setup(a){const m=a,d=be(),{isFocused:t,isChecked:u,isDisabled:i,checkboxButtonSize:v,model:o,actualValue:f,handleChange:n}=ge(m,d),l=U(E,void 0),c=Z("checkbox"),p=h(()=>{var e,g,k,r;const b=(g=(e=l==null?void 0:l.fill)==null?void 0:e.value)!=null?g:"";return{backgroundColor:b,borderColor:b,color:(r=(k=l==null?void 0:l.textColor)==null?void 0:k.value)!=null?r:"",boxShadow:b?`-1px 0 0 0 ${b}`:void 0}}),C=h(()=>[c.b("button"),c.bm("button",v.value),c.is("disabled",i.value),c.is("checked",u.value),c.is("focus",t.value)]);return(e,g)=>{var k,r;return y(),V("label",{class:S(s(C))},[e.trueValue||e.falseValue||e.trueLabel||e.falseLabel?G((y(),V("input",{key:0,"onUpdate:modelValue":b=>R(o)?o.value=b:null,class:S(s(c).be("button","original")),type:"checkbox",name:e.name,tabindex:e.tabindex,disabled:s(i),"true-value":(k=e.trueValue)!=null?k:e.trueLabel,"false-value":(r=e.falseValue)!=null?r:e.falseLabel,onChange:s(n),onFocus:b=>t.value=!0,onBlur:b=>t.value=!1,onClick:q(()=>{},["stop"])},null,42,["onUpdate:modelValue","name","tabindex","disabled","true-value","false-value","onChange","onFocus","onBlur","onClick"])),[[A,s(o)]]):G((y(),V("input",{key:1,"onUpdate:modelValue":b=>R(o)?o.value=b:null,class:S(s(c).be("button","original")),type:"checkbox",name:e.name,tabindex:e.tabindex,disabled:s(i),value:s(f),onChange:s(n),onFocus:b=>t.value=!0,onBlur:b=>t.value=!1,onClick:q(()=>{},["stop"])},null,42,["onUpdate:modelValue","name","tabindex","disabled","value","onChange","onFocus","onBlur","onClick"])),[[A,s(o)]]),e.$slots.default||e.label?(y(),V("span",{key:2,class:S(s(c).be("button","inner")),style:Ue(s(u)?s(p):void 0)},[X(e.$slots,"default",{},()=>[w(ve(e.label),1)])],6)):j("v-if",!0)],2)}}});var ke=Q(Xe,[["__file","checkbox-button.vue"]]);const Ye=xe({modelValue:{type:Se(Array),default:()=>[]},disabled:Boolean,min:Number,max:Number,size:se,fill:String,textColor:String,tag:{type:String,default:"div"},validateEvent:{type:Boolean,default:!0},...ue(["ariaLabel"])}),ea={[O]:a=>D(a),change:a=>D(a)},aa=L({name:"ElCheckboxGroup"}),la=L({...aa,props:Ye,emits:ea,setup(a,{emit:m}){const d=a,t=Z("checkbox"),{formItem:u}=J(),{inputId:i,isLabeledByFormItem:v}=ie(d,{formItemContext:u}),o=async n=>{m(O,n),await ce(),m("change",n)},f=h({get(){return d.modelValue},set(n){o(n)}});return Ge(E,{...ye(Re(d),["size","min","max","disabled","validateEvent","fill","textColor"]),modelValue:f,changeEvent:o}),W(()=>d.modelValue,()=>{d.validateEvent&&(u==null||u.validate("change").catch(n=>re()))}),(n,l)=>{var c;return y(),H(fe(n.tag),{id:s(i),class:S(s(t).b("group")),role:"group","aria-label":s(v)?void 0:n.ariaLabel||"checkbox-group","aria-labelledby":s(v)?(c=s(u))==null?void 0:c.labelId:void 0},{default:_(()=>[X(n.$slots,"default")]),_:3},8,["id","class","aria-label","aria-labelledby"])}}});var _e=Q(la,[["__file","checkbox-group.vue"]]);const ta=Ve(We,{CheckboxButton:ke,CheckboxGroup:_e});de(ke);de(_e);const oa=a=>(Oe("data-v-bafd222b"),a=a(),Pe(),a),na={class:"card-header"},sa=oa(()=>B("span",null,"登录",-1)),ua={class:"box"},ra={class:"signInButtonbox"},ia=L({__name:"SignIn",setup(a){const m=Ne(),d=Ie(),t=z(),u=ne({username:"",password:""}),i=z(!0);W(i,n=>{if(n){const l={username:u.username,password:u.password};localStorage.setItem("remberme",JSON.stringify(l))}else localStorage.removeItem("remberme")}),qe(()=>{const n=localStorage.getItem("remberme");if(n){i.value=!0;const l=JSON.parse(n);u.username=l.username||"",u.password=l.password||""}});const v=n=>{n&&(n.resetFields(),N.success("重置成功"))},o=ne({username:[{required:!0,message:"请输入用户名",trigger:"blur"},{min:5,max:10,message:"仅支持5-10个字符",trigger:"blur"},{pattern:/^[a-zA-Z0-9]+$/,message:"只能输入数字和字母",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:5,max:16,message:"长度为5-16",trigger:"blur"},{pattern:/^[a-zA-Z0-9]+$/,message:"只能输入数字和字母",trigger:"blur"}]}),f=async n=>{n&&await n.validate(async(l,c)=>{l?ae.post(d.api+"/signin",{username:u.username,password:u.password},{headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(p){if(p.status===200)if(p.data.code===200){const C=p.data.token.access_token;if(localStorage.setItem("token",C),le.success({title:"登录成功",message:"欢迎回来，"+u.username}),i.value){const e={username:u.username,password:u.password};localStorage.setItem("remberme",JSON.stringify(e))}ae.get(d.api+"/user",{headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then(function(e){e.status===200?e.data.code===200?(N.success("刷新用户信息成功"),m.userData.username=e.data.data.username,m.userData.vip_expiration_timestamp=e.data.data.vip_expiration_timestamp,m.userData.qq_bind=e.data.data.qq_bind):N.error(e.data.msg):e.status===401?N({message:"登录失败333",type:"success"}):N.error("请求失败")}).catch(function(e){alert(e),console.log(e)})}else alert(p.data.msg);else p.status===401?alert("登录失效"):(console.log(p),alert("登录失败"))}).catch(function(p){le.error({title:"登录失败",message:p})}):console.log("error submit!",c)})};return(n,l)=>{const c=we,p=Ae("RouterLink"),C=Be,e=Ee,g=ta,k=Fe,r=Le;return y(),H(r,{style:{"max-width":"480px"}},{header:_(()=>[B("div",na,[sa,x(p,{to:"/"},{default:_(()=>[x(c,{type:"danger",size:"small"},{default:_(()=>[w("关闭")]),_:1})]),_:1})])]),default:_(()=>[B("div",ua,[x(k,{model:u,rules:o,ref_key:"ruleFormRef",ref:t,"label-width":"auto",style:{"max-width":"600px"},"status-icon":""},{default:_(()=>[x(e,{label:"用户名：",prop:"username"},{default:_(()=>[x(C,{modelValue:u.username,"onUpdate:modelValue":l[0]||(l[0]=b=>u.username=b)},null,8,["modelValue"])]),_:1}),x(e,{label:"登录密码：",prop:"password"},{default:_(()=>[x(C,{modelValue:u.password,"onUpdate:modelValue":l[1]||(l[1]=b=>u.password=b),type:"password"},null,8,["modelValue"])]),_:1}),x(e,null,{default:_(()=>[x(g,{modelValue:i.value,"onUpdate:modelValue":l[2]||(l[2]=b=>i.value=b)},{default:_(()=>[w("记住密码")]),_:1},8,["modelValue"])]),_:1}),B("div",ra,[x(c,{type:"primary",onClick:l[3]||(l[3]=b=>f(t.value))},{default:_(()=>[w("登录")]),_:1}),x(c,{onClick:l[4]||(l[4]=b=>v(t.value))},{default:_(()=>[w("清空")]),_:1})])]),_:1},8,["model","rules"])])]),_:1})}}}),pa=Te(ia,[["__scopeId","data-v-bafd222b"]]);export{pa as default};
